<mxfile host="app.diagrams.net" modified="2024-12-01T00:00:00.000Z" agent="draw.io" version="22.0.0">
  <diagram name="Face Recognition Flow" id="face-recognition">
    <mxGraphModel dx="1000" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="Face Recognition Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="250" height="30" as="geometry"/>
        </mxCell>
        
        <!-- Input Image -->
        <mxCell id="input" value="Input Image" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="350" y="60" width="120" height="40" as="geometry"/>
        </mxCell>
        
        <!-- Face Detection -->
        <mxCell id="face-detect" value="Face Detection&#xa;(MediaPipe)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="350" y="130" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr1" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="input" target="face-detect">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Face Crop -->
        <mxCell id="face-crop" value="Face Crop&#xa;(Aligned)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="350" y="210" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr2" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="face-detect" target="face-crop">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Embedding Gen -->
        <mxCell id="embedding" value="Embedding Gen&#xa;(dlib ResNet)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="350" y="290" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr3" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="face-crop" target="embedding">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- 128-dim Vector -->
        <mxCell id="vector" value="128-dim Vector" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="350" y="370" width="120" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arr4" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="embedding" target="vector">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Cortex Vector Search -->
        <mxCell id="cortex-vs" value="Cortex Vector&#xa;Search (ANN)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="350" y="440" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr5" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="vector" target="cortex-vs">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Top 10 Candidates -->
        <mxCell id="candidates" value="Top 10 Candidates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="350" y="520" width="120" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="arr6" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="cortex-vs" target="candidates">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Exact Distance Verification -->
        <mxCell id="verification" value="Exact Distance&#xa;Verification" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="350" y="590" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr7" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="candidates" target="verification">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Decision Diamond -->
        <mxCell id="decision1" value="distance&#xa;&lt; 0.4 ?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="355" y="670" width="110" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="arr8" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="verification" target="decision1">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- HIGH CONFIDENCE -->
        <mxCell id="high-conf" value="HIGH CONFID.&#xa;Show Confirm" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="760" width="110" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr-yes1" value="Yes" style="endArrow=classic;html=1;" edge="1" parent="1" source="decision1" target="high-conf">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Second decision -->
        <mxCell id="decision2" value="distance&#xa;&lt; 0.55 ?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="480" y="760" width="110" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="arr-no1" value="No" style="endArrow=classic;html=1;" edge="1" parent="1" source="decision1" target="decision2">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- MEDIUM CONFIDENCE -->
        <mxCell id="medium-conf" value="MEDIUM CONFID.&#xa;Show Confirm" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="870" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr-yes2" value="Yes" style="endArrow=classic;html=1;" edge="1" parent="1" source="decision2" target="medium-conf">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- NO MATCH -->
        <mxCell id="no-match" value="NO MATCH&#xa;New Customer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="870" width="110" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="arr-no2" value="No" style="endArrow=classic;html=1;" edge="1" parent="1" source="decision2" target="no-match">
          <mxGeometry width="50" height="50" relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="Threshold Legend:&#xa;• &lt; 0.4 = High Confidence&#xa;• 0.4-0.55 = Medium&#xa;• ≥ 0.55 = No Match" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="670" width="150" height="80" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>







